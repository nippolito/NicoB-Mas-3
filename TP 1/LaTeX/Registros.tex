\documentclass[10pt, a4paper]{article}
\usepackage[paper=a4paper, left=1.5cm, right=1.5cm, bottom=1.5cm, top=3.5cm]{geometry}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage{indentfirst}
\usepackage{fancyhdr}
\usepackage{latexsym}
\usepackage{lastpage}
\usepackage{aed2-symb,aed2-itef,aed2-tad}
\usepackage[colorlinks=true, linkcolor=blue]{hyperref}
\usepackage{calc}

\begin{document}

\section{TAD \tadNombre{Registro}}

\begin{tad}{\tadNombre{GeneroTipo}}
\tadIgualdadObservacionalSimple{($\forall$ $r_1$,$r_2$:reg) ($r_1$ $\igobs$ $r_2$) $\Leftrightarrow$ \Bigg( campos($r_1$) $\igobs$ campos($r_2$) $\yluego$ \bigg(($\forall$ c:Campos) \\ \Big((c $\in$ campos($r_1$))) $\impluego$ \big((Nat?(tipo(c)) $\impluego$ (ValorEn($r_1$, c) $\igobs$ ValorEn($r_2$, c))) $\wedge$ ($\neg$Nat?(tipo(c)) $\impluego$ (PalabraEn($r_1$, c) $\igobs$ PalabraEn($r_2$, c))\big)\Big)\bigg)\Bigg)}

\tadGeneros{reg}
\tadExporta{reg, generadores, observadores, otras operaciones}
\tadUsa{\tadNombre{Nat}, \tadNombre{String}, \tadNombre{Campo}, \tadNombre{Tipo}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tadObservadores
\tadOperacion{Campos}{reg}{conj(Campo)}{}
\tadOperacion{ValorEn}{reg$\quad$ r,campo$\quad$ c}{Nat}{Nat?(tipo(c)) $\wedge$ c $\in$ Campos(r)}
\tadOperacion{PalabraEn}{reg$\quad$ r, campo$\quad$ c}{String}{$\neg$Nat?(tipo(c)) $\wedge$ c $\in$ Campos(r)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tadGeneradores
%\tadAlinearFunciones{Nat?~}{string}

\tadOperacion{NuevoRegistro}{$\bullet$}{reg}{}

\tadOperacion{agValor}{reg $\quad$ r, campo $\quad$ c, nat $\quad$ n}{reg}{c $\notin$ campos(r) $\wedge$ Nat?(tipo(c))}
\tadOperacion{agPalabra}{reg $\quad$r, campo $\quad$ c, string $\quad$ s}{reg}{c $\notin$ campos(r) $\wedge$ $\neg$Nat?(tipo(c))}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tadOtrasOperaciones
%\tadAlinearFunciones{bool, Tipo}

\tadOperacion{noRepiten}{reg $\quad$ $r_1$, reg $\quad$ $r_2$, campo $\quad$ c }{bool}{	c $\in$ campos($r_1$) $\wedge$ c $\in$ campos($r_2$}

\tadOperacion{Combinar}{reg $\quad$ $r_1$, reg $\quad$ $r_2$}{reg}{}

\tadOperacion{CombinarDeAcuerdoA}{reg $\quad$ $r_1$, reg $\quad$ $r_2$, conj(campo) $\quad$ cs}{reg}{}

\tadOperacion{Coincide?}{conj(reg) $\quad$ rs, reg $\quad$ r, campo $\quad$ c}{bool}{($\forall$ $r_1$ : reg) $r_1$ $\in$ rs $\Rightarrow$(c $\in$ campos($r_1$))}

\tadOperacion{DameCoincidente}{conj(reg) $\quad$ rs, reg $\quad$ r, campo $\quad$ c}{bool}{**(($\forall$ $r_1$ : reg) $r_1$ $\in$ rs $\Rightarrow$(c $\in$ campos($r_1$))) $\wedge$ (Coincide?(rs, r, c))}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tadAxiomas[\paratodo{reg}{r_1,r_2}, \paratodo{campo}{c}, \paratodo{conj(campo)}{cs}, \paratodo{nat}{n}, \paratodo{string}{s}]
%\tadAlinearAxiomas{bool,nat}

% OB t√≠tulo
\tadAxioma{***campos(nuevoReg)}{$\emptyset$}
\bigskip

\tadAxioma{campos(AgValor($r_1$,c,n)}{Ag(c,campos($r_1$))}
\bigskip

\tadAxioma{Nat?(String)}{False}
\bigskip

% OB tipo
\tadAxioma{ElOtro(t)}{\IF Nat?(t) THEN String ELSE Nat FI}
\bigskip

\tadAxioma{Coincide?(rs, r, c)}{\IF $\emptyset$?(rs) THEN false ELSE $\neg$ NoRepiten(DameUno(rs), r, c) $\vee$ Coincide?(SinUno(rs), r, c) FI}
\bigskip

\tadAxioma{DameCoincidente(rs, r, c)}{\IF NoRepiten(DameUno(rs), r, c) THEN DameCoincidente(SinUno(rs), r, c) ELSE DameUno(rs) FI}
\bigskip

\tadAxioma{Combinar($r_1,r_2$)}{CombinarDeAcuerdoA($r_1,c_1$,campos($c_2$))}
\bigskip

\tadAxioma{CombinarDeAcuerdoA($r_1,r_2$,cs)}{\IF $\emptyset ?$(cs) THEN $r_1$ ELSE {\IF DameUno(c)$\in$campos($r_1$) THEN CombinarDeAcuerdoA($r_1,r_2$, SinUno(cs)) ELSE {\IF Nat?(tipo(DameUno(c))) THEN agValor\big(CombinarDeAcuerdoA($r_1,r_2$,SinUno(cs)),DameUno(c), valorEn($r_2$,DameUno(cs))\big) ELSE agPalabra\big(CombinarDeAcuerdoA($r_1,r_2$,SinUno(cs)), DameUno(c),palabraEn($r_2$,DameUno(cs))\big) FI} FI} FI}
\bigskip

\tadAxioma{noRepiten($r_1,r_2$, c)}{Nat?(Tipo(c)) $\yluego$ $\neg$ (valorEn($r_1$, c) $\igobs$ valorEn($r_2$, c))) $\vee$ ($\neg$ Nat?(tipo(c)) $\yluego$ $\vee$(palabraEn($r_1$, c) $\igobs$ palabraEn($r_2$, c)))}
\bigskip

\end{tad}





\end{document}